{"version":3,"sources":["components/MovieItem.jsx","components/MovieTabs.jsx","components/App.jsx","utils/api.js","index.js"],"names":["MovieItem","state","willWatch","this","props","data","deleteMovie","addMovieToWillWatch","deleteMovieFromWillWatch","className","src","backdrop_path","poster_path","alt","title","vote_average","type","onClick","setState","React","Component","MovieTab","value","updateSortBy","getClassLink","sort_by","console","log","bind","App","fetchMovie","fetch","pageNumber","then","response","json","movies","results","total_page","total_pages","movie","id","updateMovies","filter","item","updateMoviesWillWatch","moviesWillWatch","push","sort","updatePagination","prevProps","prevState","Update","UpNum","aria-label","aria-hidden","map","key","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.627959a7.chunk.js","sourcesContent":["import React from \"react\";\n\nclass MovieItem extends React.Component {\n  state = {\n    willWatch: false\n  };\n\n  render() {\n    const {\n      data,\n      deleteMovie,\n      addMovieToWillWatch,\n      deleteMovieFromWillWatch\n    } = this.props;\n    // props.data = {};\n    return (\n      <div className=\"card\">\n        <img\n          className=\"card-img-top\"\n          src={`https://image.tmdb.org/t/p/w500${data.backdrop_path ||\n            data.poster_path}`}\n          alt=\"\"\n        />\n        <div className=\"card-body\">\n          <h6 className=\"card-title\">{data.title}</h6>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <p className=\"mb-0\">Rating: {data.vote_average}</p>\n            {this.state.willWatch ? (\n              <button\n                type=\"button\"\n                className=\"btn btn-success\"\n                onClick={() => {\n                  this.setState({\n                    willWatch: false\n                  });\n                  deleteMovieFromWillWatch(data);\n                }}\n              >\n                Will Watch\n              </button>\n            ) : (\n                <button\n                  type=\"button\"\n                  className=\"btn btn-secondary\"\n                  onClick={() => {\n                    this.setState({\n                      willWatch: true\n                    });\n                    addMovieToWillWatch(data);\n                  }}\n                >\n                  Will Watch\n              </button>\n              )}\n          </div>\n          <button\n            type=\"button\"\n            onClick={() => {\n              deleteMovie(data);\n            }}\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MovieItem;\n","import React from \"react\";\n\nconst MovieTab = (props) => {\n    const { updateSortBy} = props;\n    // Оптимизация функций\n    // handleClick - возвращаем функцию, т.е ссылку на неё, а не результат\n    const handleClick = value => {\n        return () => {\n            updateSortBy(value)    \n        }\n    }\n    // А здесь просто возвращаем строчку в имя класса , чтобы текст не пух\n    const getClassLink = (value) => {\n        return `nav-link ${\n            props.sort_by === value ? \"active\": \"\"\n        }\n        `\n    }\n    console.log(\"Component update\");    \n    return (\n        <div>\n\n        <ul className=\"tabs nav nav-pills\">\n            <li className=\"nav-item\">\n                <div \n                    // className={`nav-link ${\n                    // props.sort_by === \"popularity.desc\" ? \"active\": \"\"\n                    //}`}\n                className={getClassLink(\"popularity.desc\")}    \n//               onClick={updateSortBy.bind(null,\"popularity.desc\")}\n                onClick={handleClick(\"popularity.desc\")}\n                >\n                Popularity desc\n                </div>\n            </li>\n            <li className=\"nav-item\">\n                <div \n                className={getClassLink(\"revenue.desc\")}\n                onClick={updateSortBy.bind(null,\"revenue.desc\")}\n                >\n                Revenue desc\n                </div>\n            </li>\n            <li className=\"nav-item\">\n            <div \n                className={getClassLink(\"vote_average.desc\")}\n                onClick={updateSortBy.bind(null,\"vote_average.desc\")}                \n                >\n                Vote average desc\n                </div>\n            </li>\n        </ul>\n        </div>\n \n    )\n\n}\n\nexport default MovieTab","import React from \"react\";\n//import { moviesData } from \"../moviesData\";\nimport MovieItem from \"./MovieItem\";\nimport { API_URL , API_KEY_3} from \"../utils/api\";\nimport MovieTab from \"./MovieTabs\";\n\n// UI = fn(state, props)\n\n// App = new React.Component()\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      movies: [],\n      moviesWillWatch: [],\n      sort_by: \"revenue.desc\",\n      pageNumber: 1,\n      total_page: 33\n    };\n    this.updatePagination = this.updatePagination.bind(this);\n  }\n  \n  componentDidMount() {\n    console.log(\"mount\")\n     this.fetchMovie();\n}\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"prevstate from Update\", prevState);\n    if ((prevState.sort_by !== this.state.sort_by) || (prevState.pageNumber !== this.state.pageNumber))\n      this.fetchMovie()  \n  \n  }\n  \n  fetchMovie = () => {\n    fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.pageNumber}`)\n    .then((response)=> {\n      return response.json()\n    })\n    .then((data) => {\n\n      this.setState({\n        movies: data.results,\n        total_page: data.total_pages\n      })\n    })\n  }\n\n  deleteMovie = movie => {\n    console.log(movie.id);\n    const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\n    console.log(updateMovies);\n\n    // this.state.movies = updateMovies;\n    this.setState({\n      movies: updateMovies\n    });\n  };\n\n  addMovieToWillWatch = movie => {\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch];\n    updateMoviesWillWatch.push(movie);\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n  };\n\n  deleteMovieFromWillWatch = movie => {\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(\n      item => item.id !== movie.id\n    );\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n  };\n\n  updateSortBy = sort =>  {\n    this.setState({\n      sort_by: sort\n    })\n  }\n\n  updatePagination(Update) {\n    const UpNum = this.state.pageNumber + Update \n    this.setState({\n      pageNumber: UpNum\n    }\n    )\n//    this.fetchMovie();\n  }  \n\n  render() {\n    console.log(\"App render\", this);\n    return (\n      <div className=\"container\">\n        <div className=\"row mt-4\">\n          <div className=\"col-9\">\n            <div className=\"row\">\n              <div className=\"col-12\">\n                <MovieTab sort_by={this.state.sort_by} updateSortBy={this.updateSortBy}/>\n              </div>\n            </div>\n            {// ==============================================\n            }\n            \n            <div className=\"col-4\">\n            <nav aria-label=\"Page navigation movie\">\n            <ul className=\"pagination justify-content-center\">\n              <li\n                className={`page-item ${\n                  this.state.pageNumber === 1 ? \"disabled\" : \"\"\n                }`}\n              >\n                <button \n                  className=\"page-link\"\n                  //href=\"https://mail.ru\"\n                  onClick={this.updatePagination.bind(this,-1)}\n                  aria-label=\"Previous\"\n                >\n                  <span aria-hidden=\"true\">&laquo;</span>\n                  <span className=\"sr-only\">Previous</span>\n                </button>\n              </li>\n\n              <li\n                className={`page-item ${\n                  this.state.pageNumber === this.state.total_page\n                    ? \"disabled\"\n                    : \"\"\n                }`}\n              >\n                <button className=\"page-link\" onClick={this.updatePagination.bind(this,1)} aria-label=\"Next\">\n                  <span aria-hidden=\"true\">&raquo;</span>\n                  <span className=\"sr-only\">Next</span>\n                </button>\n              </li>\n            </ul>\n            \n          </nav>\n          Current page {this.state.pageNumber} Total page {this.state.total_page}\n          </div>\n\n\n            {// ==============================================\n            }\n\n\n\n            <div className=\"row\">\n              {this.state.movies.map(movie => {\n                return (\n                  <div className=\"col-6 mb-4\" key={movie.id}>\n                    <MovieItem\n                      data={movie}\n                      deleteMovie={this.deleteMovie}\n                      addMovieToWillWatch={this.addMovieToWillWatch}\n                      deleteMovieFromWillWatch={this.deleteMovieFromWillWatch}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <h4>Will Watch: {this.state.moviesWillWatch.length} movies</h4>\n            <ul className=\"list-group\">\n              {this.state.moviesWillWatch.map(movie => (\n                <li key={movie.id} className=\"list-group-item\">\n                  <div className=\"d-flex justify-content-between\">\n                    <p>{movie.title}</p>\n                    <p>{movie.vote_average}</p>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export const API_URL = \"https://api.themoviedb.org/3\";\n\n//export const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\nexport const API_KEY_3 = \"d7f2bc2d578c8e26c1660fb71abe50bf\";\n\nexport const API_KEY_4 =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./stylesheets/index.scss\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}